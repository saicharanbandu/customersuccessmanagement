<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title></title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <h1>Plan information</h1>
    <div class="container">
      <form class="" id="userForm" action="{% url 'plan:plan_info_view' %}" method="post">
        {% csrf_token %}
        {{ form.as_p }}

        <input type="submit" class="btn btn-primary" value="Continue" />
      </form>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script>
       
      </script>
      <script>
        $(document).ready(function() {
          $("#id_plan_name, #id_no_of_members, #id_duration").change(function () {
            var url = "{% url 'plan:ajax_load_amount' %}"; 
            var planNameId = $("#id_plan_name").val(); 
            var noOfMembers = $("#id_no_of_members").val();
            var duration = $("#id_duration").val();
            
            $.ajax({                       
              url: url, 
              data: {
                'plan_name_id': planNameId,
                'no_of_members': noOfMembers,
                'duration': duration
              },
              success: function (data) {   
                $("#id_amount").val(data.amount);  // Populate the amount field
              }
            });
          });
        });
        </script>
        
    </div>
  </body>
</html>
